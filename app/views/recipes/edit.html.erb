<%= render "shared/second-header"%>

<%= form_with model: @recipe_ingredient_procedure, url: recipe_path(@recipe.id), method: :patch, id: 'recipe-update', class: 'col-lg-6 text-center mx-auto', local: true do |f| %>
  <br><br>
  <div class='form-header'>
    <h1 class='form-header-text'>
      レシピ編集
    </h1>
  </div>
  <br>

  <%= render 'shared/error_messages', model: f.object %>
  <div class="row">
    <label for="title" class="form-label">料理名</label>
    <%= f.text_field :title, class:"form-control", id:"title", placeholder:"例) えびとブロッコリーのアヒージョ" , value: "#{@recipe.title}" %>
  </div>
  <br>
  <div class="row">
    <label for="description" class="form-label">料理の画像</label>
    <%= f.file_field :image, class:"form-control", id:"cook-image", value: "#{@recipe.image}" %>
  </div>
  <br>
  <div class="row">
    <label for="level" class="form-label">料理の難易度</label>
    <%= f.collection_select(:level_id, Level.all, :id, :name, {}, {class:"form-control"}) %>
  </div>
  <br>
  <div class="row">
    <label for="description" class="form-label">料理の説明</label>
    <%= f.text_area :description, class:"form-control form-description", id:"description", placeholder:"papapapappapapapa", value: "#{@recipe.description}"%>
  </div>
  <br>
  <div class="row">
    <label for="people" class="form-label">何人前</label>
    <%= f.text_field :people, class:"form-control", id:"people", placeholder:"例) １〜２人前", value: "#{@recipe.people}" %>
  </div>
  <br>
  <div class="d-flex justify-content-around">
    <div class="flex-column">
      <% @recipe.ingredients.length.times do |i| %>
      <div class="row">
        <label for="ingredient" class="form-label">材料名</label>
        <%= f.text_field :ingredient, class:"form-control", id:"ingredient", placeholder:"例) 砂糖", value: "#{@recipe.ingredients[i].ingredient}" %>
      </div>
    </div>
    <div class="flex-column">
      <div class="row">
        <label for="amount" class="form-label">分量</label>
        <%= f.text_field :amount, class:"form-control", id:"amount", placeholder:"例) 大さじ１", value: "#{@recipe.ingredients[i].amount}" %>
      </div>
    </div>
    <% end %>
  </div>
  <br>
  <% @recipe.procedures.each do |procedure| %>
  <div class="row">
    <label for="procedure" class="form-label">料理手順</label>
    <%= f.text_field :procedure, class:"form-control", id:"procedure", placeholder:"例) ①調味料の〇〇と〇〇を混ぜる", value: "#{procedure.procedure}" %>
  </div>
  <% end %>
  <br>
  <button type="submit" class="btn btn-primary">Submit</button>
<% end %>

<%= render "shared/second-header"%>
